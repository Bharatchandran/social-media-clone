<%- include('../partials/header')%>
<div class="h-[90vh] flex flex-col justify-end">


 
<% if(messages) { %>
    <div class="overflow-auto flex flex-col flex-col-reverse ">
    <% messages.forEach((message) => {%>
         <%if(message.user._id.toString() === currentUser.toString()) {%>
            <div class="flex items-center justify-end p-4">
        <% } else {%>
            <div class="flex items-center justify-start p-4 ">
        <% }%>
        
            <img class="rounded-full h-12 w-12" src="<%=message.user.avatar%>" alt="">
            <!-- <%=message.user.name%> -->
            <!-- <div class="bg-gray-600 h-24  ">
            <p class="text-white max-w-max  max-h-max ml-4"><%=message.message%></p>
            </div> -->
            <div class=" inline-block flex-col max-w-xs bg-blue-600 rounded-lg ml-2 ">
                <div class="block  font-sans text-base text-white font-light leading-relaxed text-inherit antialiased min-w-min p-2 break-words "><%=message.message%></div>
            </div>
            <!-- <span><%=message.createdAt.getDate()%></span>/<span><%=message.createdAt.getMonth() + 1%></span>/<span><%=message.createdAt.getFullYear()%></span> -->

    </div>
        <% })%>
    </div>
        <% }%>
        <div class=" bottom-0">
        <form  action="/messages/<%=userId%>" method="POST">
            <label for="chat" class="sr-only">Your message</label>
            <div class="flex items-center px-3 py-2 rounded-lg  bg-gray-700">
               
                <textarea id="chat" name="message" rows="1" class="block mx-4 p-2.5 w-full text-sm   rounded-lg border    bg-gray-800 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500 outline-0 min-h-12 overflow-hidden" placeholder="Your message..."></textarea>
                    <button type="submit" class="inline-flex justify-center p-2  rounded-full cursor-pointer  text-blue-500 hover:bg-gray-600">
                    <svg class="w-5 h-5 rotate-90" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
                        <path d="m17.914 18.594-8-18a1 1 0 0 0-1.828 0l-8 18a1 1 0 0 0 1.157 1.376L8 18.281V9a1 1 0 0 1 2 0v9.281l6.758 1.689a1 1 0 0 0 1.156-1.376Z"/>
                    </svg>
                    <span class="sr-only">Send message</span>
                </button>
            </div>
        </form>
    </div>
</div>
<%- include('../partials/footer')%>
